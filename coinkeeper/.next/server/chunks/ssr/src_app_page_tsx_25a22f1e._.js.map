{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/miraskarasbekov/Desktop/CoinKeeperNew/coinkeeper/src/app/page.tsx"],"sourcesContent":["// @ts-nocheck\n'use client';\n\nimport { useSession } from 'next-auth/react';\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport DashboardLayout from '@/components/layouts/dashboard-layout';\nimport Grid from '@mui/material/Grid';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport {\n  AccountBalance as AccountBalanceIcon,\n  TrendingUp as TrendingUpIcon,\n  TrendingDown as TrendingDownIcon,\n  Category as CategoryIcon,\n} from '@mui/icons-material';\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js';\nimport { Doughnut } from 'react-chartjs-2';\n\n// Add a special comment to suppress TypeScript errors\n// @ts-nocheck\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\ninterface DashboardStats {\n  totalBalance: number;\n  totalIncome: number;\n  totalExpenses: number;\n  recentTransactions: any[];\n  expensesByCategory: {\n    labels: string[];\n    data: number[];\n    backgroundColor: string[];\n  };\n}\n\nexport default function Home() {\n  const { data: session, status } = useSession();\n  const router = useRouter();\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Debug information\n  useEffect(() => {\n    console.log('Home page rendered, session status:', status);\n    console.log('Session data:', session);\n  }, [status, session]);\n\n  useEffect(() => {\n    if (status === 'unauthenticated') {\n      console.log('User is not authenticated, redirecting to sign-in page');\n      router.push('/auth/signin');\n    }\n  }, [status, router]);\n\n  useEffect(() => {\n    const fetchDashboardStats = async () => {\n      try {\n        console.log('Fetching dashboard stats...');\n        const response = await fetch('/api/dashboard/stats');\n        const data = await response.json();\n        console.log('Dashboard stats received:', data);\n        setStats(data);\n      } catch (error) {\n        console.error('Error fetching dashboard stats:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (session?.user) {\n      fetchDashboardStats();\n    } else if (status !== 'loading') {\n      setLoading(false);\n    }\n  }, [session, status]);\n\n  // Show loading state while checking authentication\n  if (status === 'loading' || loading) {\n    return (\n      <DashboardLayout>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"80vh\">\n          <CircularProgress />\n          <Typography variant=\"h6\" sx={{ ml: 2 }}>\n            Loading CoinKeeper...\n          </Typography>\n        </Box>\n      </DashboardLayout>\n    );\n  }\n\n  // If not authenticated and not loading, ensure redirect\n  if (status === 'unauthenticated') {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"100vh\">\n        <CircularProgress />\n        <Typography variant=\"h6\" sx={{ ml: 2 }}>\n          Redirecting to login...\n        </Typography>\n      </Box>\n    );\n  }\n\n  // Authenticated and loaded - show dashboard\n  return (\n    <DashboardLayout>\n      <Box sx={{ p: 3 }} className=\"dashboard-content\">\n        <Typography variant=\"h4\" gutterBottom>\n          Welcome, {session?.user?.username || 'User'}!\n        </Typography>\n\n        <Grid container spacing={3} component=\"div\">\n          {/* Total Balance Card */}\n          {/* @ts-ignore */}\n          <Grid item xs={12} sm={6} md={3} component=\"div\">\n            <Paper\n              className=\"dashboard-card\"\n              sx={{\n                p: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                height: 140,\n                bgcolor: 'primary.main',\n                color: 'white',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <AccountBalanceIcon sx={{ mr: 1 }} />\n                <Typography variant=\"h6\">Total Balance</Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${stats?.totalBalance?.toFixed(2) || '0.00'}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          {/* Total Income Card */}\n          <Grid item xs={12} sm={6} md={3} component=\"div\">\n            <Paper\n              className=\"dashboard-card\"\n              sx={{\n                p: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                height: 140,\n                bgcolor: 'success.main',\n                color: 'white',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <TrendingUpIcon sx={{ mr: 1 }} />\n                <Typography variant=\"h6\">Total Income</Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${stats?.totalIncome?.toFixed(2) || '0.00'}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          {/* Total Expenses Card */}\n          <Grid item xs={12} sm={6} md={3} component=\"div\">\n            <Paper\n              className=\"dashboard-card\"\n              sx={{\n                p: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                height: 140,\n                bgcolor: 'error.main',\n                color: 'white',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <TrendingDownIcon sx={{ mr: 1 }} />\n                <Typography variant=\"h6\">Total Expenses</Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                ${stats?.totalExpenses?.toFixed(2) || '0.00'}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          {/* Categories Overview Card */}\n          <Grid item xs={12} sm={6} md={3} component=\"div\">\n            <Paper\n              className=\"dashboard-card\"\n              sx={{\n                p: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                height: 140,\n                bgcolor: 'warning.main',\n                color: 'white',\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                <CategoryIcon sx={{ mr: 1 }} />\n                <Typography variant=\"h6\">Categories</Typography>\n              </Box>\n              <Typography variant=\"h4\">\n                {stats?.expensesByCategory?.labels?.length || 0}\n              </Typography>\n            </Paper>\n          </Grid>\n\n          {/* Expenses by Category Chart */}\n          <Grid item xs={12} md={6} component=\"div\">\n            <Paper className=\"chart-card\" sx={{ p: 2 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Expenses by Category\n              </Typography>\n              {stats?.expensesByCategory && (\n                <Box sx={{ height: 300 }}>\n                  <Doughnut\n                    data={{\n                      labels: stats.expensesByCategory.labels,\n                      datasets: [\n                        {\n                          data: stats.expensesByCategory.data,\n                          backgroundColor: stats.expensesByCategory.backgroundColor,\n                        },\n                      ],\n                    }}\n                    options={{\n                      responsive: true,\n                      maintainAspectRatio: false,\n                    }}\n                  />\n                </Box>\n              )}\n            </Paper>\n          </Grid>\n\n          {/* Recent Transactions */}\n          <Grid item xs={12} md={6} component=\"div\">\n            <Paper className=\"transaction-card\" sx={{ p: 2 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Recent Transactions\n              </Typography>\n              {stats?.recentTransactions?.map((transaction, index) => (\n                <Box\n                  key={index}\n                  sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    py: 1,\n                    borderBottom: '1px solid',\n                    borderColor: 'divider',\n                  }}\n                >\n                  <Box>\n                    <Typography variant=\"subtitle1\">\n                      {transaction.description}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {transaction.category}\n                    </Typography>\n                  </Box>\n                  <Typography\n                    variant=\"subtitle1\"\n                    color={transaction.type === 'income' ? 'success.main' : 'error.main'}\n                  >\n                    {transaction.type === 'income' ? '+' : '-'}${transaction.amount}\n                  </Typography>\n                </Box>\n              ))}\n            </Paper>\n          </Grid>\n        </Grid>\n      </Box>\n    </DashboardLayout>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}