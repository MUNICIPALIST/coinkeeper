{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/miraskarasbekov/Desktop/CoinKeeperNew/coinkeeper/src/app/reports/page.tsx"],"sourcesContent":["// @ts-nocheck\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useSession } from 'next-auth/react';\nimport { useLanguage } from '@/providers/language-provider';\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Grid from '@mui/material/Grid';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport DashboardLayout from '@/components/layouts/dashboard-layout';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n} from 'recharts';\n\ninterface DailySummary {\n  date: string;\n  income: number;\n  expense: number;\n  net: number;\n}\n\ninterface CategorySummary {\n  name: string;\n  amount: number;\n  percentage: number;\n}\n\ninterface MonthlyComparison {\n  month: string;\n  income: number;\n  expense: number;\n  savings: number;\n  savingsRate: number;\n}\n\ninterface Goal {\n  id: number;\n  name: string;\n  targetAmount: number;\n  currentAmount: number;\n  progress: number;\n  daysLeft: number | null;\n  deadline: string | null;\n  description: string | null;\n  status: string;\n}\n\ninterface ReportData {\n  dailySummary: DailySummary[];\n  categorySummary: CategorySummary[];\n  monthlyComparison: MonthlyComparison[];\n  goals: Goal[];\n}\n\ninterface TimeRange {\n  value: string;\n  label_key: string;\n}\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884D8'];\n\nexport default function ReportsPage() {\n  const { data: session } = useSession();\n  const { t } = useLanguage();\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState(0);\n  const [timeRange, setTimeRange] = useState('30');\n  const [reportData, setReportData] = useState<ReportData>({\n    dailySummary: [],\n    categorySummary: [],\n    monthlyComparison: [],\n    goals: [],\n  });\n\n  const timeRanges: TimeRange[] = [\n    { value: '7', label_key: 'reports.time_range_options.last_7_days' },\n    { value: '30', label_key: 'reports.time_range_options.last_30_days' },\n    { value: '90', label_key: 'reports.time_range_options.last_90_days' },\n    { value: '365', label_key: 'reports.time_range_options.last_year' },\n  ];\n\n  useEffect(() => {\n    if (session?.user) {\n      fetchReportData();\n    }\n  }, [timeRange, session]);\n\n  const fetchReportData = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/reports?timeRange=${timeRange}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch report data');\n      }\n      const data = await response.json();\n      setReportData(data);\n    } catch (error) {\n      console.error('Error fetching report data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\n    setActiveTab(newValue);\n  };\n\n  const handleTimeRangeChange = (event: { target: { value: string } }) => {\n    setTimeRange(event.target.value);\n  };\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"80vh\">\n          <CircularProgress />\n        </Box>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout>\n      <Box sx={{ p: 3 }}>\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n          <Typography variant=\"h4\">{t('reports.financial_reports')}</Typography>\n          <FormControl sx={{ minWidth: 200 }}>\n            <InputLabel>{t('reports.time_range')}</InputLabel>\n            <Select\n              value={timeRange}\n              label={t('reports.time_range')}\n              onChange={handleTimeRangeChange}\n            >\n              {timeRanges.map((range) => (\n                <MenuItem key={range.value} value={range.value}>\n                  {t(range.label_key)}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </Box>\n\n        <Tabs value={activeTab} onChange={handleTabChange} sx={{ mb: 3 }}>\n          <Tab label={t('reports.overview')} />\n          <Tab label={t('reports.categories')} />\n          <Tab label={t('reports.trends')} />\n        </Tabs>\n\n        {activeTab === 0 && (\n          <Grid container spacing={3}>\n            <Grid item xs={12} md={6}>\n              <Paper sx={{ p: 2, height: '400px' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  {t('reports.income_vs_expenses')}\n                </Typography>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={reportData.dailySummary}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"income\"\n                      stroke=\"#00C49F\"\n                      name={t('reports.income')}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"expense\"\n                      stroke=\"#FF8042\"\n                      name={t('reports.expenses')}\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </Paper>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Paper sx={{ p: 2, height: '400px' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  {t('reports.category_distribution')}\n                </Typography>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie\n                      data={reportData.categorySummary}\n                      dataKey=\"amount\"\n                      nameKey=\"name\"\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      outerRadius={80}\n                      label\n                    >\n                      {reportData.categorySummary.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={COLORS[index % COLORS.length]}\n                        />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                    <Legend />\n                  </PieChart>\n                </ResponsiveContainer>\n              </Paper>\n            </Grid>\n          </Grid>\n        )}\n\n        {activeTab === 1 && (\n          <Grid container spacing={3}>\n            {reportData.categorySummary.map((category) => (\n              <Grid item xs={12} sm={6} md={4} key={category.name}>\n                <Paper sx={{ p: 2 }}>\n                  <Typography variant=\"h6\">{category.name}</Typography>\n                  <Typography variant=\"h4\">\n                    ${category.amount.toLocaleString()}\n                  </Typography>\n                  <Typography color=\"text.secondary\">\n                    {category.percentage.toFixed(1)}% {t('reports.of_total_expenses')}\n                  </Typography>\n                </Paper>\n              </Grid>\n            ))}\n          </Grid>\n        )}\n\n        {activeTab === 2 && (\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <Paper sx={{ p: 2, height: '400px' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  {t('reports.monthly_trends')}\n                </Typography>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={reportData.monthlyComparison}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"month\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Legend />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"income\"\n                      stroke=\"#00C49F\"\n                      name={t('reports.income')}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"expense\"\n                      stroke=\"#FF8042\"\n                      name={t('reports.expenses')}\n                    />\n                    <Line\n                      type=\"monotone\"\n                      dataKey=\"savings\"\n                      stroke=\"#8884d8\"\n                      name={t('reports.savings')}\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </Paper>\n            </Grid>\n          </Grid>\n        )}\n      </Box>\n    </DashboardLayout>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}